#!/bin/bash

# get our etc and bin dir
cwetcdir="$(cd $(dirname "${BASH_SOURCE[0]}") && pwd)"
cwbindir="$(cd "${cwetcdir}"/../bin && pwd)"

# simple path functions
#   https://github.com/ryanwoodsmall/shell-ish/blob/master/lib/path-functions.sh
function append_path() {
  export PATH="${PATH}:${1}"
}
function prepend_path() {
  export PATH="${1}:${PATH}"
}

# add our bin dir to our path
append_path "${cwbindir}"

# profile.d holds packages' profile scriplets
# local.d holds custom scriptlets
profiled="profile.d"
locald="local.d"
for d in ${profiled} ${locald} ; do
  for p in ${cwetcdir}/${d}/*.sh ; do
    test -r "${p}" && source "${p}"
  done
done
